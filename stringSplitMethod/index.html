<!doctype html>
<html lang="en">

<head>
  <!-- Required meta tags -->
  <meta charset="utf-8">
  <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">

  <!-- Bootstrap CSS -->
  <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/css/bootstrap.min.css"
    integrity="sha384-TX8t27EcRE3e/ihU7zmQxVncDAy5uIKz4rEkgIXeMed4M0jlfIDPvg6uqKI2xXr2" crossorigin="anonymous">

  <title>Javascript</title>
</head>

<body>
  <div class="container">
    <h3>
      Javascript
      <small class="text-muted">String split() method</small>
    </h3>
    <div class="row">
      <div class="col-md-12">
        <div class="input-group mb-3">
          <div class="input-group-prepend">
            <span class="input-group-text">Cheque Reader</span>
          </div>
          <input type="text" class="form-control" placeholder="Paste Here" aria-label="chqReader"
            aria-describedby="chqReader" id="chqReader" data-toggle="#" data-placement="top"
            title="Result of Scanner and Splited to Inputbox Below" value="o001209o 062d734t 2805d5567o">
        </div>
      </div>
    </div>
    <div class="row">
      <div class="col-md-12">
        <div class="input-group">
          <div class="input-group-prepend">
            <span class="input-group-text">Result</span>
          </div>
          <input type="text" aria-label="inputOne" id="inputOne" class="form-control text-center form-input"
            placeholder="Input 1">
          <input type="text" aria-label="inputTwo" id="inputTwo" class="form-control text-center form-input"
            placeholder="Input 2">
          <input type="text" aria-label="inputThree" id="inputThree" class="form-control text-center form-input"
            placeholder="Input 3">
        </div>
      </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.5.1.min.js"
      integrity="sha256-9/aliU8dGd2tb6OSsuzixeV4y/faTqgFtohetphbbj0=" crossorigin="anonymous"></script>
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"
      integrity="sha384-9/reFTGAW83EW2RDu2S0VKaIzap3H66lZH81PoYlFhbGU+6BZp6G7niu735Sk7lN" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.5.3/dist/js/bootstrap.min.js"
      integrity="sha384-w1Q4orYjBQndcko6MimVbzY0tgp4pWB4lZ7lr30WKz0vr/aWKhXdBNmNb5D92v7s" crossorigin="anonymous">
    </script>
    <script src="https://cdn.jsdelivr.net/npm/sweetalert2@10"></script>
    <script>
      // Enable Tooltip
      $(function () {
        $('[data-toggle="tooltip"]').tooltip();
      });

      // Get Input Box Cheque Reader
      const formScanner = document.getElementById("chqReader");
      // Add keyup function to formScanner
      formScanner.addEventListener("keyup", chequeReader);
      // Get Form Input on Nodelist
      const formInput = document.querySelectorAll(".form-input");

      for (let i = 0; i < formInput.length; i++) {
        formInput[i].addEventListener("keyup", chequeReader);
      }
      // Convert Nodelist to Array
      let formInputArr = Array.from(formInput);

      function chequeReader() {
        try {
          const scannedValue = this.value;
          let result = scannedValue.split(" ");
          return splitedValue(result);
        } catch (error) {
          return null;
        }
      }

      function splitedValue(result) {
        for (let i = 0; i < formInputArr.length; i++) {
          result[i];
        }
        return getDigitOnly(result);
      }

      function getDigitOnly(res) {
        const resLth = [];
        for (let i = 0; i < formInputArr.length; i++) {
          resLth[i] = res[i].replace(/\D/g, "").length;
        }
        // Get Digit Only
        formInputArr[0].value = res[0].replace(/\D/g, "");
        if (resLth[1] > 6) {
          formInputArr[1].value = res[1].replace(/\D/g, "").slice(0, 6);
          formInputArr[2].value = res[1].replace(/\D/g, "").slice(6, 15);
        } else {
          formInputArr[1].value = res[1].replace(/\D/g, "");
          formInputArr[2].value = res[2].replace(/\D/g, "");
        }

        return confirm();
      }

      function confirm() {
        const swalWithBootstrapButtons = Swal.mixin({
          customClass: {
            confirmButton: 'btn btn-success',
            cancelButton: 'btn btn-danger'
          }
        });

        swalWithBootstrapButtons.fire({
          title: 'Update the Data?',
          icon: 'warning',
          showCancelButton: true,
          confirmButtonText: 'Yes',
          cancelButtonText: 'No',
          reverseButtons: false
        }).then((result) => {
          if (result.value) {
            logVal();
            // swalWithBootstrapButtons.fire(
            //     'Deleted!',
            //     'Your file has been deleted.',
            //     'success'
            // );
          } else if (
            /* Read more about handling dismissals below */
            result.dismiss === Swal.DismissReason.cancel
          ) {
            formInputArr[0].value = '';
            formInputArr[1].value = '';
            formInputArr[2].value = '';
          }
        });
      }

      function logVal() {
        Swal.fire(
          'Good job!',
          'Data Updated!',
          'success'
        )
      }
    </script>
</body>

</html>
